
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>HomomorphicDehazeImage</title><meta name="generator" content="MATLAB 9.12"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2023-05-26"><meta name="DC.source" content="HomomorphicDehazeImage.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; }

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }
span.typesection { color:#A0522D }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><pre class="codeinput"><span class="keyword">classdef</span> HomomorphicDehazeImage &lt; matlab.apps.AppBase

    <span class="comment">% Properties that correspond to app components</span>
    <span class="keyword">properties</span> (Access = public)
        UIFigure                  <span class="typesection">matlab.ui.Figure</span>
        GridLayout                <span class="typesection">matlab.ui.container.GridLayout</span>
        LeftPanel                 <span class="typesection">matlab.ui.container.Panel</span>
        Image                     <span class="typesection">matlab.ui.control.Image</span>
        HistogramButton           <span class="typesection">matlab.ui.control.Button</span>
        Dehazed_RGBSwitchLabel    <span class="typesection">matlab.ui.control.Label</span>
        Dehazed_GraySwitch        <span class="typesection">matlab.ui.control.Switch</span>
        Dehazed_GraySwitchLabel   <span class="typesection">matlab.ui.control.Label</span>
        GI_FFTSwitch              <span class="typesection">matlab.ui.control.Switch</span>
        GI_FFTSwitchLabel         <span class="typesection">matlab.ui.control.Label</span>
        TabGroup                  <span class="typesection">matlab.ui.container.TabGroup</span>
        GausHPTab                 <span class="typesection">matlab.ui.container.Tab</span>
        CEditField                <span class="typesection">matlab.ui.control.NumericEditField</span>
        CEditFieldLabel           <span class="typesection">matlab.ui.control.Label</span>
        gHEditField               <span class="typesection">matlab.ui.control.NumericEditField</span>
        gHEditFieldLabel          <span class="typesection">matlab.ui.control.Label</span>
        gLEditField               <span class="typesection">matlab.ui.control.NumericEditField</span>
        gLEditFieldLabel          <span class="typesection">matlab.ui.control.Label</span>
        D0EditField               <span class="typesection">matlab.ui.control.NumericEditField</span>
        D0EditFieldLabel          <span class="typesection">matlab.ui.control.Label</span>
        ButterHPTab               <span class="typesection">matlab.ui.container.Tab</span>
        NEditField                <span class="typesection">matlab.ui.control.NumericEditField</span>
        NEditFieldLabel           <span class="typesection">matlab.ui.control.Label</span>
        D0EditField_2             <span class="typesection">matlab.ui.control.NumericEditField</span>
        D0EditField_2Label        <span class="typesection">matlab.ui.control.Label</span>
        IdealHPTab                <span class="typesection">matlab.ui.container.Tab</span>
        D0EditField_3             <span class="typesection">matlab.ui.control.NumericEditField</span>
        D0EditField_3Label        <span class="typesection">matlab.ui.control.Label</span>
        Adapt_EQSwitch            <span class="typesection">matlab.ui.control.Switch</span>
        Adapt_EQSwitchLabel       <span class="typesection">matlab.ui.control.Label</span>
        RunButton                 <span class="typesection">matlab.ui.control.Button</span>
        I_FFTSwitch               <span class="typesection">matlab.ui.control.Switch</span>
        I_FFTSwitchLabel          <span class="typesection">matlab.ui.control.Label</span>
        DispSelectedFilterButton  <span class="typesection">matlab.ui.control.Button</span>
        SelectImageButton         <span class="typesection">matlab.ui.control.Button</span>
        Dehazed_RGBSwitch         <span class="typesection">matlab.ui.control.Switch</span>
        RightPanel                <span class="typesection">matlab.ui.container.Panel</span>
        UIAxes                    <span class="typesection">matlab.ui.control.UIAxes</span>
        UIAxes_2                  <span class="typesection">matlab.ui.control.UIAxes</span>
    <span class="keyword">end</span>

    <span class="comment">% Properties that correspond to apps with auto-reflow</span>
    <span class="keyword">properties</span> (Access = private)
        onePanelWidth = 576;
    <span class="keyword">end</span>


    <span class="keyword">properties</span> (Access = private)
        imageData = []
        I_gray =[]
        I_gray_defog = []
        H = []
        H_selected =[]
        I_defog = []
        imageJ_adapt = []
    <span class="keyword">end</span>

    <span class="keyword">methods</span> (Access = private)

        <span class="keyword">function</span> Update_H(app)
                app.Dehazed_GraySwitch.Enable=<span class="string">'on'</span>;app.Dehazed_GraySwitchLabel.Enable=<span class="string">'on'</span>;
                app.Dehazed_RGBSwitch.Enable=<span class="string">'on'</span>;app.Dehazed_RGBSwitchLabel.Enable=<span class="string">'on'</span>;
                app.Adapt_EQSwitch.Enable=<span class="string">'on'</span>;app.Adapt_EQSwitchLabel.Enable=<span class="string">'on'</span>;
                app.GI_FFTSwitch.Enable=<span class="string">'on'</span>;app.GI_FFTSwitchLabel.Enable=<span class="string">'on'</span>;
                app.I_FFTSwitch.Enable=<span class="string">'on'</span>;app.I_FFTSwitchLabel.Enable=<span class="string">'on'</span>;
                app.DispSelectedFilterButton.Enable=<span class="string">'on'</span>;
                app.RunButton.Enable=<span class="string">'on'</span>;
        <span class="keyword">end</span>
    <span class="keyword">end</span>


    <span class="comment">% Callbacks that handle component events</span>
    <span class="keyword">methods</span> (Access = private)

        <span class="comment">% Button pushed function: SelectImageButton</span>
        <span class="keyword">function</span> SelectImageButtonPushed(app, event)

            close <span class="string">all</span>;

            [file ,path] = uigetfile({<span class="string">'*.jpg;*.jpeg;*.png;*.gif;*.tif'</span>;<span class="string">'*.*'</span>},<span class="string">'File Selector'</span>);
            selectedfile = fullfile(path,file);

            <span class="comment">% Check if a file was selected</span>
            <span class="keyword">if</span> isequal(file, 0) <span class="comment">% No file selected</span>
                msgbox(<span class="string">'There is NO image selected'</span>);
            <span class="keyword">else</span>
                <span class="comment">% Read the image file</span>
                app.imageData=imread(selectedfile);
                imshow(app.imageData, <span class="string">'Parent'</span>, app.UIAxes);
                [height, width, ~] = size(app.imageData);
                app.UIAxes.XLim = [0 width];
                app.UIAxes.YLim = [0 height];
                app.TabGroup.Visible=<span class="string">'on'</span>;
                app.RunButton.Enable=<span class="string">'on'</span>;
                app.HistogramButton.Enable=<span class="string">'on'</span>;

                app.imageData = im2double(app.imageData);
                app.I_gray = rgb2gray(app.imageData);
            <span class="keyword">end</span>

        <span class="keyword">end</span>

        <span class="comment">% Button pushed function: RunButton</span>
        <span class="keyword">function</span> RunButtonPushed(app, event)
</pre><pre class="codeinput">            close <span class="string">all</span>;
</pre><pre class="codeinput">            [app.I_gray_defog ,If,G_I_FFT] = homomorphic_filter(app.I_gray,app.H);

            <span class="keyword">if</span> strcmp(app.I_FFTSwitch.Value,<span class="string">'On'</span>)
               figure,imshow(If),title(<span class="string">'I_{FFT}'</span>);
            <span class="keyword">end</span>
            <span class="keyword">if</span> strcmp(app.GI_FFTSwitch.Value,<span class="string">'On'</span>)
               figure,imshow(G_I_FFT),title(<span class="string">'G*I_{FFT}'</span>);
            <span class="keyword">end</span>

            <span class="keyword">if</span> strcmp(app.Dehazed_GraySwitch.Value,<span class="string">'On'</span>)
               figure,imshow(app.I_gray_defog),title(<span class="string">'Dehazed Gray'</span>);
            <span class="keyword">end</span>
</pre><pre class="codeinput">            app.I_defog = zeros(size(app.imageData));
            <span class="keyword">for</span> i = 1:3
                app.I_defog(:,:,i) = app.imageData(:,:,i).*app.I_gray_defog;
            <span class="keyword">end</span>
            app.I_defog = rescale(app.I_defog);

            imshow(app.I_defog, <span class="string">'Parent'</span>, app.UIAxes_2);
            [height, width, ~] = size(app.I_defog);
            app.UIAxes_2.XLim = [0 width];
            app.UIAxes_2.YLim = [0 height];
            <span class="keyword">if</span> strcmp(app.Dehazed_RGBSwitch.Value,<span class="string">'On'</span>)
               figure,imshow(app.I_defog),title(<span class="string">'Dehazed'</span>);
            <span class="keyword">end</span>
</pre><pre class="codeinput">            <span class="keyword">if</span> strcmp(app.Adapt_EQSwitch.Value,<span class="string">'On'</span>)
               LAB = rgb2lab(uint8(app.I_defog*255));
               L = LAB(:,:,1)/100;
               L = adapthisteq(L,<span class="string">'NumTiles'</span>,[8 8],<span class="string">'ClipLimit'</span>,0.005);
               LAB(:,:,1) = L*100;
               app.imageJ_adapt = lab2rgb(LAB);
               figure,imshow(app.imageJ_adapt),title(<span class="string">'J_{adaptEQ}'</span>);
            <span class="keyword">end</span>
</pre><pre class="codeinput">        <span class="keyword">end</span>

        <span class="comment">% Callback function: CEditField, D0EditField, GausHPTab, GausHPTab,</span>
        <span class="comment">%</span>
        <span class="comment">% ...and 2 other components</span>
        <span class="keyword">function</span> GausHPTabButtonDown(app, event)
          gL = app.gLEditField.Value;
          gH = app.gHEditField.Value;
          C  = app.CEditField.Value;
          D0 = app.D0EditField.Value;
          app.H = gaushp(app.I_gray, gL, gH, D0, C);
          app.Update_H()
        <span class="keyword">end</span>

        <span class="comment">% Callback function: ButterHPTab, ButterHPTab, D0EditField_2,</span>
        <span class="comment">% ...and 1 other component</span>
        <span class="keyword">function</span> ButterHPTabButtonDown(app, event)
          n  = app.NEditField.Value;
          D0 = app.D0EditField_2.Value;
          app.H = butterhp(app.I_gray, D0,n);
          app.Update_H()
        <span class="keyword">end</span>

        <span class="comment">% Callback function: D0EditField_3, IdealHPTab, IdealHPTab</span>
        <span class="keyword">function</span> IdealHPTabButtonDown(app, event)
          D0 = app.D0EditField_3.Value;
          app.H = idealhp(app.I_gray, D0);
          app.Update_H()
        <span class="keyword">end</span>

        <span class="comment">% Button pushed function: DispSelectedFilterButton</span>
        <span class="keyword">function</span> DispSelectedFilterButtonPushed(app, event)
            close <span class="string">all</span>;
            plotTFSurface(app.H);
        <span class="keyword">end</span>

        <span class="comment">% Button pushed function: HistogramButton</span>
        <span class="keyword">function</span> HistogramButtonPushed(app, event)
            figure;imhist(app.I_gray);title(<span class="string">'Histogram'</span>);
        <span class="keyword">end</span>

        <span class="comment">% Changes arrangement of the app based on UIFigure width</span>
        <span class="keyword">function</span> updateAppLayout(app, event)
            currentFigureWidth = app.UIFigure.Position(3);
            <span class="keyword">if</span>(currentFigureWidth &lt;= app.onePanelWidth)
                <span class="comment">% Change to a 2x1 grid</span>
                app.GridLayout.RowHeight = {516, 516};
                app.GridLayout.ColumnWidth = {<span class="string">'1x'</span>};
                app.RightPanel.Layout.Row = 2;
                app.RightPanel.Layout.Column = 1;
            <span class="keyword">else</span>
                <span class="comment">% Change to a 1x2 grid</span>
                app.GridLayout.RowHeight = {<span class="string">'1x'</span>};
                app.GridLayout.ColumnWidth = {248, <span class="string">'1x'</span>};
                app.RightPanel.Layout.Row = 1;
                app.RightPanel.Layout.Column = 2;
            <span class="keyword">end</span>
        <span class="keyword">end</span>
    <span class="keyword">end</span>

    <span class="comment">% Component initialization</span>
    methods (Access = private)

        <span class="comment">% Create UIFigure and components</span>
        <span class="keyword">function</span> createComponents(app)

            <span class="comment">% Get the file path for locating images</span>
            pathToMLAPP = fileparts(mfilename(<span class="string">'fullpath'</span>));

            <span class="comment">% Create UIFigure and hide until all components are created</span>
            app.UIFigure = uifigure(<span class="string">'Visible'</span>, <span class="string">'off'</span>);
            app.UIFigure.AutoResizeChildren = <span class="string">'off'</span>;
            app.UIFigure.Position = [100 100 650 516];
            app.UIFigure.Name = <span class="string">'MATLAB App'</span>;
            app.UIFigure.SizeChangedFcn = createCallbackFcn(app, @updateAppLayout, true);

            <span class="comment">% Create GridLayout</span>
            app.GridLayout = uigridlayout(app.UIFigure);
            app.GridLayout.ColumnWidth = {248, <span class="string">'1x'</span>};
            app.GridLayout.RowHeight = {<span class="string">'1x'</span>};
            app.GridLayout.ColumnSpacing = 0;
            app.GridLayout.RowSpacing = 0;
            app.GridLayout.Padding = [0 0 0 0];
            app.GridLayout.Scrollable = <span class="string">'on'</span>;

            <span class="comment">% Create LeftPanel</span>
            app.LeftPanel = uipanel(app.GridLayout);
            app.LeftPanel.Layout.Row = 1;
            app.LeftPanel.Layout.Column = 1;

            <span class="comment">% Create Dehazed_RGBSwitch</span>
            app.Dehazed_RGBSwitch = uiswitch(app.LeftPanel, <span class="string">'slider'</span>);
            app.Dehazed_RGBSwitch.Enable = <span class="string">'off'</span>;
            app.Dehazed_RGBSwitch.Position = [150 211 45 20];

            <span class="comment">% Create SelectImageButton</span>
            app.SelectImageButton = uibutton(app.LeftPanel, <span class="string">'push'</span>);
            app.SelectImageButton.ButtonPushedFcn = createCallbackFcn(app, @SelectImageButtonPushed, true);
            app.SelectImageButton.Position = [74 483 100 23];
            app.SelectImageButton.Text = <span class="string">'Select Image'</span>;

            <span class="comment">% Create DispSelectedFilterButton</span>
            app.DispSelectedFilterButton = uibutton(app.LeftPanel, <span class="string">'push'</span>);
            app.DispSelectedFilterButton.ButtonPushedFcn = createCallbackFcn(app, @DispSelectedFilterButtonPushed, true);
            app.DispSelectedFilterButton.Enable = <span class="string">'off'</span>;
            app.DispSelectedFilterButton.Position = [68 323 120 22];
            app.DispSelectedFilterButton.Text = <span class="string">'Disp Selected Filter'</span>;

            <span class="comment">% Create I_FFTSwitchLabel</span>
            app.I_FFTSwitchLabel = uilabel(app.LeftPanel);
            app.I_FFTSwitchLabel.HorizontalAlignment = <span class="string">'center'</span>;
            app.I_FFTSwitchLabel.Enable = <span class="string">'off'</span>;
            app.I_FFTSwitchLabel.Position = [43 293 37 22];
            app.I_FFTSwitchLabel.Text = <span class="string">'I_FFT'</span>;

            <span class="comment">% Create I_FFTSwitch</span>
            app.I_FFTSwitch = uiswitch(app.LeftPanel, <span class="string">'slider'</span>);
            app.I_FFTSwitch.Enable = <span class="string">'off'</span>;
            app.I_FFTSwitch.Position = [42 267 45 20];

            <span class="comment">% Create RunButton</span>
            app.RunButton = uibutton(app.LeftPanel, <span class="string">'push'</span>);
            app.RunButton.ButtonPushedFcn = createCallbackFcn(app, @RunButtonPushed, true);
            app.RunButton.Enable = <span class="string">'off'</span>;
            app.RunButton.Position = [114 120 110 65];
            app.RunButton.Text = <span class="string">'Run'</span>;

            <span class="comment">% Create Adapt_EQSwitchLabel</span>
            app.Adapt_EQSwitchLabel = uilabel(app.LeftPanel);
            app.Adapt_EQSwitchLabel.HorizontalAlignment = <span class="string">'center'</span>;
            app.Adapt_EQSwitchLabel.Enable = <span class="string">'off'</span>;
            app.Adapt_EQSwitchLabel.Position = [38 144 61 22];
            app.Adapt_EQSwitchLabel.Text = <span class="string">'Adapt_EQ'</span>;

            <span class="comment">% Create Adapt_EQSwitch</span>
            app.Adapt_EQSwitch = uiswitch(app.LeftPanel, <span class="string">'slider'</span>);
            app.Adapt_EQSwitch.Orientation = <span class="string">'vertical'</span>;
            app.Adapt_EQSwitch.Enable = <span class="string">'off'</span>;
            app.Adapt_EQSwitch.Position = [12 133 20 45];

            <span class="comment">% Create TabGroup</span>
            app.TabGroup = uitabgroup(app.LeftPanel);
            app.TabGroup.Visible = <span class="string">'off'</span>;
            app.TabGroup.Position = [12 352 218 94];

            <span class="comment">% Create GausHPTab</span>
            app.GausHPTab = uitab(app.TabGroup);
            app.GausHPTab.SizeChangedFcn = createCallbackFcn(app, @GausHPTabButtonDown, true);
            app.GausHPTab.Title = <span class="string">'GausHP'</span>;
            app.GausHPTab.ButtonDownFcn = createCallbackFcn(app, @GausHPTabButtonDown, true);

            <span class="comment">% Create D0EditFieldLabel</span>
            app.D0EditFieldLabel = uilabel(app.GausHPTab);
            app.D0EditFieldLabel.HorizontalAlignment = <span class="string">'right'</span>;
            app.D0EditFieldLabel.Position = [12 38 25 22];
            app.D0EditFieldLabel.Text = <span class="string">'D0'</span>;

            <span class="comment">% Create D0EditField</span>
            app.D0EditField = uieditfield(app.GausHPTab, <span class="string">'numeric'</span>);
            app.D0EditField.Limits = [1 100];
            app.D0EditField.ValueChangedFcn = createCallbackFcn(app, @GausHPTabButtonDown, true);
            app.D0EditField.Position = [52 38 30 22];
            app.D0EditField.Value = 1;

            <span class="comment">% Create gLEditFieldLabel</span>
            app.gLEditFieldLabel = uilabel(app.GausHPTab);
            app.gLEditFieldLabel.HorizontalAlignment = <span class="string">'right'</span>;
            app.gLEditFieldLabel.Position = [130 39 25 22];
            app.gLEditFieldLabel.Text = <span class="string">'gL'</span>;

            <span class="comment">% Create gLEditField</span>
            app.gLEditField = uieditfield(app.GausHPTab, <span class="string">'numeric'</span>);
            app.gLEditField.Limits = [0.09 1];
            app.gLEditField.ValueChangedFcn = createCallbackFcn(app, @GausHPTabButtonDown, true);
            app.gLEditField.Position = [170 39 30 22];
            app.gLEditField.Value = 0.1;

            <span class="comment">% Create gHEditFieldLabel</span>
            app.gHEditFieldLabel = uilabel(app.GausHPTab);
            app.gHEditFieldLabel.HorizontalAlignment = <span class="string">'right'</span>;
            app.gHEditFieldLabel.Position = [130 6 25 22];
            app.gHEditFieldLabel.Text = <span class="string">'gH'</span>;

            <span class="comment">% Create gHEditField</span>
            app.gHEditField = uieditfield(app.GausHPTab, <span class="string">'numeric'</span>);
            app.gHEditField.Limits = [1 4];
            app.gHEditField.ValueChangedFcn = createCallbackFcn(app, @GausHPTabButtonDown, true);
            app.gHEditField.Position = [170 6 30 22];
            app.gHEditField.Value = 1.1;

            <span class="comment">% Create CEditFieldLabel</span>
            app.CEditFieldLabel = uilabel(app.GausHPTab);
            app.CEditFieldLabel.HorizontalAlignment = <span class="string">'right'</span>;
            app.CEditFieldLabel.Position = [12 6 25 22];
            app.CEditFieldLabel.Text = <span class="string">'C'</span>;

            <span class="comment">% Create CEditField</span>
            app.CEditField = uieditfield(app.GausHPTab, <span class="string">'numeric'</span>);
            app.CEditField.Limits = [1 100];
            app.CEditField.ValueChangedFcn = createCallbackFcn(app, @GausHPTabButtonDown, true);
            app.CEditField.Position = [52 6 30 22];
            app.CEditField.Value = 2;

            <span class="comment">% Create ButterHPTab</span>
            app.ButterHPTab = uitab(app.TabGroup);
            app.ButterHPTab.SizeChangedFcn = createCallbackFcn(app, @ButterHPTabButtonDown, true);
            app.ButterHPTab.Title = <span class="string">'ButterHP'</span>;
            app.ButterHPTab.ButtonDownFcn = createCallbackFcn(app, @ButterHPTabButtonDown, true);

            <span class="comment">% Create D0EditField_2Label</span>
            app.D0EditField_2Label = uilabel(app.ButterHPTab);
            app.D0EditField_2Label.HorizontalAlignment = <span class="string">'right'</span>;
            app.D0EditField_2Label.Position = [74 41 25 22];
            app.D0EditField_2Label.Text = <span class="string">'D0'</span>;

            <span class="comment">% Create D0EditField_2</span>
            app.D0EditField_2 = uieditfield(app.ButterHPTab, <span class="string">'numeric'</span>);
            app.D0EditField_2.Limits = [1 100];
            app.D0EditField_2.ValueChangedFcn = createCallbackFcn(app, @ButterHPTabButtonDown, true);
            app.D0EditField_2.Position = [114 41 30 22];
            app.D0EditField_2.Value = 1;

            <span class="comment">% Create NEditFieldLabel</span>
            app.NEditFieldLabel = uilabel(app.ButterHPTab);
            app.NEditFieldLabel.HorizontalAlignment = <span class="string">'right'</span>;
            app.NEditFieldLabel.Position = [74 11 25 22];
            app.NEditFieldLabel.Text = <span class="string">'N'</span>;

            <span class="comment">% Create NEditField</span>
            app.NEditField = uieditfield(app.ButterHPTab, <span class="string">'numeric'</span>);
            app.NEditField.Limits = [1 100];
            app.NEditField.RoundFractionalValues = <span class="string">'on'</span>;
            app.NEditField.ValueChangedFcn = createCallbackFcn(app, @ButterHPTabButtonDown, true);
            app.NEditField.Position = [114 11 30 22];
            app.NEditField.Value = 2;

            <span class="comment">% Create IdealHPTab</span>
            app.IdealHPTab = uitab(app.TabGroup);
            app.IdealHPTab.SizeChangedFcn = createCallbackFcn(app, @IdealHPTabButtonDown, true);
            app.IdealHPTab.Title = <span class="string">'IdealHP'</span>;
            app.IdealHPTab.ButtonDownFcn = createCallbackFcn(app, @IdealHPTabButtonDown, true);

            <span class="comment">% Create D0EditField_3Label</span>
            app.D0EditField_3Label = uilabel(app.IdealHPTab);
            app.D0EditField_3Label.HorizontalAlignment = <span class="string">'right'</span>;
            app.D0EditField_3Label.Position = [70 25 25 22];
            app.D0EditField_3Label.Text = <span class="string">'D0'</span>;

            <span class="comment">% Create D0EditField_3</span>
            app.D0EditField_3 = uieditfield(app.IdealHPTab, <span class="string">'numeric'</span>);
            app.D0EditField_3.Limits = [1 100];
            app.D0EditField_3.RoundFractionalValues = <span class="string">'on'</span>;
            app.D0EditField_3.ValueChangedFcn = createCallbackFcn(app, @IdealHPTabButtonDown, true);
            app.D0EditField_3.Position = [110 25 30 22];
            app.D0EditField_3.Value = 1;

            <span class="comment">% Create GI_FFTSwitchLabel</span>
            app.GI_FFTSwitchLabel = uilabel(app.LeftPanel);
            app.GI_FFTSwitchLabel.HorizontalAlignment = <span class="string">'center'</span>;
            app.GI_FFTSwitchLabel.Enable = <span class="string">'off'</span>;
            app.GI_FFTSwitchLabel.Position = [144 292 52 22];
            app.GI_FFTSwitchLabel.Text = <span class="string">'G*I_FFT'</span>;

            <span class="comment">% Create GI_FFTSwitch</span>
            app.GI_FFTSwitch = uiswitch(app.LeftPanel, <span class="string">'slider'</span>);
            app.GI_FFTSwitch.Enable = <span class="string">'off'</span>;
            app.GI_FFTSwitch.Position = [150 266 45 20];

            <span class="comment">% Create Dehazed_GraySwitchLabel</span>
            app.Dehazed_GraySwitchLabel = uilabel(app.LeftPanel);
            app.Dehazed_GraySwitchLabel.HorizontalAlignment = <span class="string">'center'</span>;
            app.Dehazed_GraySwitchLabel.Enable = <span class="string">'off'</span>;
            app.Dehazed_GraySwitchLabel.Position = [19 235 86 22];
            app.Dehazed_GraySwitchLabel.Text = <span class="string">'Dehazed_Gray'</span>;

            <span class="comment">% Create Dehazed_GraySwitch</span>
            app.Dehazed_GraySwitch = uiswitch(app.LeftPanel, <span class="string">'slider'</span>);
            app.Dehazed_GraySwitch.Enable = <span class="string">'off'</span>;
            app.Dehazed_GraySwitch.Position = [42 211 45 20];

            <span class="comment">% Create Dehazed_RGBSwitchLabel</span>
            app.Dehazed_RGBSwitchLabel = uilabel(app.LeftPanel);
            app.Dehazed_RGBSwitchLabel.HorizontalAlignment = <span class="string">'center'</span>;
            app.Dehazed_RGBSwitchLabel.Enable = <span class="string">'off'</span>;
            app.Dehazed_RGBSwitchLabel.Position = [127 234 86 22];
            app.Dehazed_RGBSwitchLabel.Text = <span class="string">'Dehazed_RGB'</span>;

            <span class="comment">% Create HistogramButton</span>
            app.HistogramButton = uibutton(app.LeftPanel, <span class="string">'push'</span>);
            app.HistogramButton.ButtonPushedFcn = createCallbackFcn(app, @HistogramButtonPushed, true);
            app.HistogramButton.Enable = <span class="string">'off'</span>;
            app.HistogramButton.Position = [74 453 100 22];
            app.HistogramButton.Text = <span class="string">'Histogram'</span>;

            <span class="comment">% Create Image</span>
            app.Image = uiimage(app.LeftPanel);
            app.Image.Position = [24 7 199 106];
            app.Image.ImageSource = fullfile(pathToMLAPP, <span class="string">'2023-05-26_18h16_08.png'</span>);

            <span class="comment">% Create RightPanel</span>
            app.RightPanel = uipanel(app.GridLayout);
            app.RightPanel.Layout.Row = 1;
            app.RightPanel.Layout.Column = 2;

            <span class="comment">% Create UIAxes_2</span>
            app.UIAxes_2 = uiaxes(app.RightPanel);
            title(app.UIAxes_2, <span class="string">'Dehazed'</span>)
            app.UIAxes_2.XColor = <span class="string">'none'</span>;
            app.UIAxes_2.XTick = [];
            app.UIAxes_2.YColor = <span class="string">'none'</span>;
            app.UIAxes_2.YTick = [];
            app.UIAxes_2.ZColor = <span class="string">'none'</span>;
            app.UIAxes_2.GridColor = <span class="string">'none'</span>;
            app.UIAxes_2.MinorGridColor = <span class="string">'none'</span>;
            app.UIAxes_2.Position = [25 12 350 250];

            <span class="comment">% Create UIAxes</span>
            app.UIAxes = uiaxes(app.RightPanel);
            title(app.UIAxes, <span class="string">'Original'</span>)
            app.UIAxes.XColor = <span class="string">'none'</span>;
            app.UIAxes.XTick = [];
            app.UIAxes.YColor = <span class="string">'none'</span>;
            app.UIAxes.YTick = [];
            app.UIAxes.ZColor = <span class="string">'none'</span>;
            app.UIAxes.GridColor = <span class="string">'none'</span>;
            app.UIAxes.MinorGridColor = <span class="string">'none'</span>;
            app.UIAxes.Position = [25 265 350 250];

            <span class="comment">% Show the figure after all components are created</span>
            app.UIFigure.Visible = <span class="string">'on'</span>;
        <span class="keyword">end</span>
    <span class="keyword">end</span>

    <span class="comment">% App creation and deletion</span>
    methods (Access = public)

        <span class="comment">% Construct app</span>
        <span class="keyword">function</span> app = HomomorphicDehazeImage

            <span class="comment">% Create UIFigure and components</span>
            createComponents(app)

            <span class="comment">% Register the app with App Designer</span>
            registerApp(app, app.UIFigure)

            <span class="keyword">if</span> nargout == 0
                clear <span class="string">app</span>
            <span class="keyword">end</span>
        <span class="keyword">end</span>

        <span class="comment">% Code that executes before app deletion</span>
        <span class="keyword">function</span> delete(app)

            <span class="comment">% Delete UIFigure when app is deleted</span>
            delete(app.UIFigure)
        <span class="keyword">end</span>
    <span class="keyword">end</span>
<span class="keyword">end</span>
</pre><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2022a</a><br></p></div><!--
##### SOURCE BEGIN #####
classdef HomomorphicDehazeImage < matlab.apps.AppBase

    % Properties that correspond to app components
    properties (Access = public)
        UIFigure                  matlab.ui.Figure
        GridLayout                matlab.ui.container.GridLayout
        LeftPanel                 matlab.ui.container.Panel
        Image                     matlab.ui.control.Image
        HistogramButton           matlab.ui.control.Button
        Dehazed_RGBSwitchLabel    matlab.ui.control.Label
        Dehazed_GraySwitch        matlab.ui.control.Switch
        Dehazed_GraySwitchLabel   matlab.ui.control.Label
        GI_FFTSwitch              matlab.ui.control.Switch
        GI_FFTSwitchLabel         matlab.ui.control.Label
        TabGroup                  matlab.ui.container.TabGroup
        GausHPTab                 matlab.ui.container.Tab
        CEditField                matlab.ui.control.NumericEditField
        CEditFieldLabel           matlab.ui.control.Label
        gHEditField               matlab.ui.control.NumericEditField
        gHEditFieldLabel          matlab.ui.control.Label
        gLEditField               matlab.ui.control.NumericEditField
        gLEditFieldLabel          matlab.ui.control.Label
        D0EditField               matlab.ui.control.NumericEditField
        D0EditFieldLabel          matlab.ui.control.Label
        ButterHPTab               matlab.ui.container.Tab
        NEditField                matlab.ui.control.NumericEditField
        NEditFieldLabel           matlab.ui.control.Label
        D0EditField_2             matlab.ui.control.NumericEditField
        D0EditField_2Label        matlab.ui.control.Label
        IdealHPTab                matlab.ui.container.Tab
        D0EditField_3             matlab.ui.control.NumericEditField
        D0EditField_3Label        matlab.ui.control.Label
        Adapt_EQSwitch            matlab.ui.control.Switch
        Adapt_EQSwitchLabel       matlab.ui.control.Label
        RunButton                 matlab.ui.control.Button
        I_FFTSwitch               matlab.ui.control.Switch
        I_FFTSwitchLabel          matlab.ui.control.Label
        DispSelectedFilterButton  matlab.ui.control.Button
        SelectImageButton         matlab.ui.control.Button
        Dehazed_RGBSwitch         matlab.ui.control.Switch
        RightPanel                matlab.ui.container.Panel
        UIAxes                    matlab.ui.control.UIAxes
        UIAxes_2                  matlab.ui.control.UIAxes
    end

    % Properties that correspond to apps with auto-reflow
    properties (Access = private)
        onePanelWidth = 576;
    end

    
    properties (Access = private)
        imageData = []
        I_gray =[]
        I_gray_defog = []
        H = []
        H_selected =[]
        I_defog = []
        imageJ_adapt = []
    end
    
    methods (Access = private)
        
        function Update_H(app)
                app.Dehazed_GraySwitch.Enable='on';app.Dehazed_GraySwitchLabel.Enable='on';
                app.Dehazed_RGBSwitch.Enable='on';app.Dehazed_RGBSwitchLabel.Enable='on';
                app.Adapt_EQSwitch.Enable='on';app.Adapt_EQSwitchLabel.Enable='on';
                app.GI_FFTSwitch.Enable='on';app.GI_FFTSwitchLabel.Enable='on';
                app.I_FFTSwitch.Enable='on';app.I_FFTSwitchLabel.Enable='on';
                app.DispSelectedFilterButton.Enable='on';
                app.RunButton.Enable='on';
        end
    end
    

    % Callbacks that handle component events
    methods (Access = private)

        % Button pushed function: SelectImageButton
        function SelectImageButtonPushed(app, event)

            close all;

            [file ,path] = uigetfile({'*.jpg;*.jpeg;*.png;*.gif;*.tif';'*.*'},'File Selector');
            selectedfile = fullfile(path,file);
            
            % Check if a file was selected
            if isequal(file, 0) % No file selected
                msgbox('There is NO image selected');
            else
                % Read the image file
                app.imageData=imread(selectedfile);
                imshow(app.imageData, 'Parent', app.UIAxes);
                [height, width, ~] = size(app.imageData);
                app.UIAxes.XLim = [0 width];
                app.UIAxes.YLim = [0 height];
                app.TabGroup.Visible='on';
                app.RunButton.Enable='on';
                app.HistogramButton.Enable='on';

                app.imageData = im2double(app.imageData);
                app.I_gray = rgb2gray(app.imageData);
            end
         
        end

        % Button pushed function: RunButton
        function RunButtonPushed(app, event)
            close all;
            %%
            [app.I_gray_defog ,If,G_I_FFT] = homomorphic_filter(app.I_gray,app.H);

            if strcmp(app.I_FFTSwitch.Value,'On')
               figure,imshow(If),title('I_{FFT}'); 
            end
            if strcmp(app.GI_FFTSwitch.Value,'On')
               figure,imshow(G_I_FFT),title('G*I_{FFT}'); 
            end

            if strcmp(app.Dehazed_GraySwitch.Value,'On')
               figure,imshow(app.I_gray_defog),title('Dehazed Gray');
            end 
            %% 
            app.I_defog = zeros(size(app.imageData));
            for i = 1:3
                app.I_defog(:,:,i) = app.imageData(:,:,i).*app.I_gray_defog;
            end
            app.I_defog = rescale(app.I_defog);

            imshow(app.I_defog, 'Parent', app.UIAxes_2);
            [height, width, ~] = size(app.I_defog);
            app.UIAxes_2.XLim = [0 width];
            app.UIAxes_2.YLim = [0 height];
            if strcmp(app.Dehazed_RGBSwitch.Value,'On')
               figure,imshow(app.I_defog),title('Dehazed');
            end 
  
            %%
            if strcmp(app.Adapt_EQSwitch.Value,'On')
               LAB = rgb2lab(uint8(app.I_defog*255)); 
               L = LAB(:,:,1)/100;
               L = adapthisteq(L,'NumTiles',[8 8],'ClipLimit',0.005);
               LAB(:,:,1) = L*100;
               app.imageJ_adapt = lab2rgb(LAB);
               figure,imshow(app.imageJ_adapt),title('J_{adaptEQ}');
            end
            
        end

        % Callback function: CEditField, D0EditField, GausHPTab, GausHPTab,
        % 
        % ...and 2 other components
        function GausHPTabButtonDown(app, event)
          gL = app.gLEditField.Value;
          gH = app.gHEditField.Value;
          C  = app.CEditField.Value;
          D0 = app.D0EditField.Value;
          app.H = gaushp(app.I_gray, gL, gH, D0, C);  
          app.Update_H()
        end

        % Callback function: ButterHPTab, ButterHPTab, D0EditField_2, 
        % ...and 1 other component
        function ButterHPTabButtonDown(app, event)
          n  = app.NEditField.Value;
          D0 = app.D0EditField_2.Value;
          app.H = butterhp(app.I_gray, D0,n);
          app.Update_H()
        end

        % Callback function: D0EditField_3, IdealHPTab, IdealHPTab
        function IdealHPTabButtonDown(app, event)
          D0 = app.D0EditField_3.Value;
          app.H = idealhp(app.I_gray, D0);
          app.Update_H()
        end

        % Button pushed function: DispSelectedFilterButton
        function DispSelectedFilterButtonPushed(app, event)
            close all;
            plotTFSurface(app.H);
        end

        % Button pushed function: HistogramButton
        function HistogramButtonPushed(app, event)
            figure;imhist(app.I_gray);title('Histogram');
        end

        % Changes arrangement of the app based on UIFigure width
        function updateAppLayout(app, event)
            currentFigureWidth = app.UIFigure.Position(3);
            if(currentFigureWidth <= app.onePanelWidth)
                % Change to a 2x1 grid
                app.GridLayout.RowHeight = {516, 516};
                app.GridLayout.ColumnWidth = {'1x'};
                app.RightPanel.Layout.Row = 2;
                app.RightPanel.Layout.Column = 1;
            else
                % Change to a 1x2 grid
                app.GridLayout.RowHeight = {'1x'};
                app.GridLayout.ColumnWidth = {248, '1x'};
                app.RightPanel.Layout.Row = 1;
                app.RightPanel.Layout.Column = 2;
            end
        end
    end

    % Component initialization
    methods (Access = private)

        % Create UIFigure and components
        function createComponents(app)

            % Get the file path for locating images
            pathToMLAPP = fileparts(mfilename('fullpath'));

            % Create UIFigure and hide until all components are created
            app.UIFigure = uifigure('Visible', 'off');
            app.UIFigure.AutoResizeChildren = 'off';
            app.UIFigure.Position = [100 100 650 516];
            app.UIFigure.Name = 'MATLAB App';
            app.UIFigure.SizeChangedFcn = createCallbackFcn(app, @updateAppLayout, true);

            % Create GridLayout
            app.GridLayout = uigridlayout(app.UIFigure);
            app.GridLayout.ColumnWidth = {248, '1x'};
            app.GridLayout.RowHeight = {'1x'};
            app.GridLayout.ColumnSpacing = 0;
            app.GridLayout.RowSpacing = 0;
            app.GridLayout.Padding = [0 0 0 0];
            app.GridLayout.Scrollable = 'on';

            % Create LeftPanel
            app.LeftPanel = uipanel(app.GridLayout);
            app.LeftPanel.Layout.Row = 1;
            app.LeftPanel.Layout.Column = 1;

            % Create Dehazed_RGBSwitch
            app.Dehazed_RGBSwitch = uiswitch(app.LeftPanel, 'slider');
            app.Dehazed_RGBSwitch.Enable = 'off';
            app.Dehazed_RGBSwitch.Position = [150 211 45 20];

            % Create SelectImageButton
            app.SelectImageButton = uibutton(app.LeftPanel, 'push');
            app.SelectImageButton.ButtonPushedFcn = createCallbackFcn(app, @SelectImageButtonPushed, true);
            app.SelectImageButton.Position = [74 483 100 23];
            app.SelectImageButton.Text = 'Select Image';

            % Create DispSelectedFilterButton
            app.DispSelectedFilterButton = uibutton(app.LeftPanel, 'push');
            app.DispSelectedFilterButton.ButtonPushedFcn = createCallbackFcn(app, @DispSelectedFilterButtonPushed, true);
            app.DispSelectedFilterButton.Enable = 'off';
            app.DispSelectedFilterButton.Position = [68 323 120 22];
            app.DispSelectedFilterButton.Text = 'Disp Selected Filter';

            % Create I_FFTSwitchLabel
            app.I_FFTSwitchLabel = uilabel(app.LeftPanel);
            app.I_FFTSwitchLabel.HorizontalAlignment = 'center';
            app.I_FFTSwitchLabel.Enable = 'off';
            app.I_FFTSwitchLabel.Position = [43 293 37 22];
            app.I_FFTSwitchLabel.Text = 'I_FFT';

            % Create I_FFTSwitch
            app.I_FFTSwitch = uiswitch(app.LeftPanel, 'slider');
            app.I_FFTSwitch.Enable = 'off';
            app.I_FFTSwitch.Position = [42 267 45 20];

            % Create RunButton
            app.RunButton = uibutton(app.LeftPanel, 'push');
            app.RunButton.ButtonPushedFcn = createCallbackFcn(app, @RunButtonPushed, true);
            app.RunButton.Enable = 'off';
            app.RunButton.Position = [114 120 110 65];
            app.RunButton.Text = 'Run';

            % Create Adapt_EQSwitchLabel
            app.Adapt_EQSwitchLabel = uilabel(app.LeftPanel);
            app.Adapt_EQSwitchLabel.HorizontalAlignment = 'center';
            app.Adapt_EQSwitchLabel.Enable = 'off';
            app.Adapt_EQSwitchLabel.Position = [38 144 61 22];
            app.Adapt_EQSwitchLabel.Text = 'Adapt_EQ';

            % Create Adapt_EQSwitch
            app.Adapt_EQSwitch = uiswitch(app.LeftPanel, 'slider');
            app.Adapt_EQSwitch.Orientation = 'vertical';
            app.Adapt_EQSwitch.Enable = 'off';
            app.Adapt_EQSwitch.Position = [12 133 20 45];

            % Create TabGroup
            app.TabGroup = uitabgroup(app.LeftPanel);
            app.TabGroup.Visible = 'off';
            app.TabGroup.Position = [12 352 218 94];

            % Create GausHPTab
            app.GausHPTab = uitab(app.TabGroup);
            app.GausHPTab.SizeChangedFcn = createCallbackFcn(app, @GausHPTabButtonDown, true);
            app.GausHPTab.Title = 'GausHP';
            app.GausHPTab.ButtonDownFcn = createCallbackFcn(app, @GausHPTabButtonDown, true);

            % Create D0EditFieldLabel
            app.D0EditFieldLabel = uilabel(app.GausHPTab);
            app.D0EditFieldLabel.HorizontalAlignment = 'right';
            app.D0EditFieldLabel.Position = [12 38 25 22];
            app.D0EditFieldLabel.Text = 'D0';

            % Create D0EditField
            app.D0EditField = uieditfield(app.GausHPTab, 'numeric');
            app.D0EditField.Limits = [1 100];
            app.D0EditField.ValueChangedFcn = createCallbackFcn(app, @GausHPTabButtonDown, true);
            app.D0EditField.Position = [52 38 30 22];
            app.D0EditField.Value = 1;

            % Create gLEditFieldLabel
            app.gLEditFieldLabel = uilabel(app.GausHPTab);
            app.gLEditFieldLabel.HorizontalAlignment = 'right';
            app.gLEditFieldLabel.Position = [130 39 25 22];
            app.gLEditFieldLabel.Text = 'gL';

            % Create gLEditField
            app.gLEditField = uieditfield(app.GausHPTab, 'numeric');
            app.gLEditField.Limits = [0.09 1];
            app.gLEditField.ValueChangedFcn = createCallbackFcn(app, @GausHPTabButtonDown, true);
            app.gLEditField.Position = [170 39 30 22];
            app.gLEditField.Value = 0.1;

            % Create gHEditFieldLabel
            app.gHEditFieldLabel = uilabel(app.GausHPTab);
            app.gHEditFieldLabel.HorizontalAlignment = 'right';
            app.gHEditFieldLabel.Position = [130 6 25 22];
            app.gHEditFieldLabel.Text = 'gH';

            % Create gHEditField
            app.gHEditField = uieditfield(app.GausHPTab, 'numeric');
            app.gHEditField.Limits = [1 4];
            app.gHEditField.ValueChangedFcn = createCallbackFcn(app, @GausHPTabButtonDown, true);
            app.gHEditField.Position = [170 6 30 22];
            app.gHEditField.Value = 1.1;

            % Create CEditFieldLabel
            app.CEditFieldLabel = uilabel(app.GausHPTab);
            app.CEditFieldLabel.HorizontalAlignment = 'right';
            app.CEditFieldLabel.Position = [12 6 25 22];
            app.CEditFieldLabel.Text = 'C';

            % Create CEditField
            app.CEditField = uieditfield(app.GausHPTab, 'numeric');
            app.CEditField.Limits = [1 100];
            app.CEditField.ValueChangedFcn = createCallbackFcn(app, @GausHPTabButtonDown, true);
            app.CEditField.Position = [52 6 30 22];
            app.CEditField.Value = 2;

            % Create ButterHPTab
            app.ButterHPTab = uitab(app.TabGroup);
            app.ButterHPTab.SizeChangedFcn = createCallbackFcn(app, @ButterHPTabButtonDown, true);
            app.ButterHPTab.Title = 'ButterHP';
            app.ButterHPTab.ButtonDownFcn = createCallbackFcn(app, @ButterHPTabButtonDown, true);

            % Create D0EditField_2Label
            app.D0EditField_2Label = uilabel(app.ButterHPTab);
            app.D0EditField_2Label.HorizontalAlignment = 'right';
            app.D0EditField_2Label.Position = [74 41 25 22];
            app.D0EditField_2Label.Text = 'D0';

            % Create D0EditField_2
            app.D0EditField_2 = uieditfield(app.ButterHPTab, 'numeric');
            app.D0EditField_2.Limits = [1 100];
            app.D0EditField_2.ValueChangedFcn = createCallbackFcn(app, @ButterHPTabButtonDown, true);
            app.D0EditField_2.Position = [114 41 30 22];
            app.D0EditField_2.Value = 1;

            % Create NEditFieldLabel
            app.NEditFieldLabel = uilabel(app.ButterHPTab);
            app.NEditFieldLabel.HorizontalAlignment = 'right';
            app.NEditFieldLabel.Position = [74 11 25 22];
            app.NEditFieldLabel.Text = 'N';

            % Create NEditField
            app.NEditField = uieditfield(app.ButterHPTab, 'numeric');
            app.NEditField.Limits = [1 100];
            app.NEditField.RoundFractionalValues = 'on';
            app.NEditField.ValueChangedFcn = createCallbackFcn(app, @ButterHPTabButtonDown, true);
            app.NEditField.Position = [114 11 30 22];
            app.NEditField.Value = 2;

            % Create IdealHPTab
            app.IdealHPTab = uitab(app.TabGroup);
            app.IdealHPTab.SizeChangedFcn = createCallbackFcn(app, @IdealHPTabButtonDown, true);
            app.IdealHPTab.Title = 'IdealHP';
            app.IdealHPTab.ButtonDownFcn = createCallbackFcn(app, @IdealHPTabButtonDown, true);

            % Create D0EditField_3Label
            app.D0EditField_3Label = uilabel(app.IdealHPTab);
            app.D0EditField_3Label.HorizontalAlignment = 'right';
            app.D0EditField_3Label.Position = [70 25 25 22];
            app.D0EditField_3Label.Text = 'D0';

            % Create D0EditField_3
            app.D0EditField_3 = uieditfield(app.IdealHPTab, 'numeric');
            app.D0EditField_3.Limits = [1 100];
            app.D0EditField_3.RoundFractionalValues = 'on';
            app.D0EditField_3.ValueChangedFcn = createCallbackFcn(app, @IdealHPTabButtonDown, true);
            app.D0EditField_3.Position = [110 25 30 22];
            app.D0EditField_3.Value = 1;

            % Create GI_FFTSwitchLabel
            app.GI_FFTSwitchLabel = uilabel(app.LeftPanel);
            app.GI_FFTSwitchLabel.HorizontalAlignment = 'center';
            app.GI_FFTSwitchLabel.Enable = 'off';
            app.GI_FFTSwitchLabel.Position = [144 292 52 22];
            app.GI_FFTSwitchLabel.Text = 'G*I_FFT';

            % Create GI_FFTSwitch
            app.GI_FFTSwitch = uiswitch(app.LeftPanel, 'slider');
            app.GI_FFTSwitch.Enable = 'off';
            app.GI_FFTSwitch.Position = [150 266 45 20];

            % Create Dehazed_GraySwitchLabel
            app.Dehazed_GraySwitchLabel = uilabel(app.LeftPanel);
            app.Dehazed_GraySwitchLabel.HorizontalAlignment = 'center';
            app.Dehazed_GraySwitchLabel.Enable = 'off';
            app.Dehazed_GraySwitchLabel.Position = [19 235 86 22];
            app.Dehazed_GraySwitchLabel.Text = 'Dehazed_Gray';

            % Create Dehazed_GraySwitch
            app.Dehazed_GraySwitch = uiswitch(app.LeftPanel, 'slider');
            app.Dehazed_GraySwitch.Enable = 'off';
            app.Dehazed_GraySwitch.Position = [42 211 45 20];

            % Create Dehazed_RGBSwitchLabel
            app.Dehazed_RGBSwitchLabel = uilabel(app.LeftPanel);
            app.Dehazed_RGBSwitchLabel.HorizontalAlignment = 'center';
            app.Dehazed_RGBSwitchLabel.Enable = 'off';
            app.Dehazed_RGBSwitchLabel.Position = [127 234 86 22];
            app.Dehazed_RGBSwitchLabel.Text = 'Dehazed_RGB';

            % Create HistogramButton
            app.HistogramButton = uibutton(app.LeftPanel, 'push');
            app.HistogramButton.ButtonPushedFcn = createCallbackFcn(app, @HistogramButtonPushed, true);
            app.HistogramButton.Enable = 'off';
            app.HistogramButton.Position = [74 453 100 22];
            app.HistogramButton.Text = 'Histogram';

            % Create Image
            app.Image = uiimage(app.LeftPanel);
            app.Image.Position = [24 7 199 106];
            app.Image.ImageSource = fullfile(pathToMLAPP, '2023-05-26_18h16_08.png');

            % Create RightPanel
            app.RightPanel = uipanel(app.GridLayout);
            app.RightPanel.Layout.Row = 1;
            app.RightPanel.Layout.Column = 2;

            % Create UIAxes_2
            app.UIAxes_2 = uiaxes(app.RightPanel);
            title(app.UIAxes_2, 'Dehazed')
            app.UIAxes_2.XColor = 'none';
            app.UIAxes_2.XTick = [];
            app.UIAxes_2.YColor = 'none';
            app.UIAxes_2.YTick = [];
            app.UIAxes_2.ZColor = 'none';
            app.UIAxes_2.GridColor = 'none';
            app.UIAxes_2.MinorGridColor = 'none';
            app.UIAxes_2.Position = [25 12 350 250];

            % Create UIAxes
            app.UIAxes = uiaxes(app.RightPanel);
            title(app.UIAxes, 'Original')
            app.UIAxes.XColor = 'none';
            app.UIAxes.XTick = [];
            app.UIAxes.YColor = 'none';
            app.UIAxes.YTick = [];
            app.UIAxes.ZColor = 'none';
            app.UIAxes.GridColor = 'none';
            app.UIAxes.MinorGridColor = 'none';
            app.UIAxes.Position = [25 265 350 250];

            % Show the figure after all components are created
            app.UIFigure.Visible = 'on';
        end
    end

    % App creation and deletion
    methods (Access = public)

        % Construct app
        function app = HomomorphicDehazeImage

            % Create UIFigure and components
            createComponents(app)

            % Register the app with App Designer
            registerApp(app, app.UIFigure)

            if nargout == 0
                clear app
            end
        end

        % Code that executes before app deletion
        function delete(app)

            % Delete UIFigure when app is deleted
            delete(app.UIFigure)
        end
    end
end
##### SOURCE END #####
--></body></html>